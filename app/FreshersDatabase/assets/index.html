<html>
	<head>
	<link rel="stylesheet" href="jquery.mobile-1.3.2.min.css">
	
	<script src="jquery-1.8.3.min.js"></script>
	<script src="jquery.mobile-1.3.2.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
		  console.log("document ready");

			$('#addFresherForm').live('submit', function (e) {
				console.log("hitting addFresherForm submit");
			    //cache the form element for use in this function
			    var $this = $(this);
			
			    //prevent the default submission of the form
			    e.preventDefault();
				console.log("hitting fresherAdd vianse from ngoAdd is " + responseData);
					$("#fresherFormWrapper").hide();
					//if(responseData && responseData.status && responseData.status =="success"){
					$("#fresherFormStatu ajax");
			    //run an AJAX post request to your server-side script, $this.serialize() is the data from your ` being added to the request
			    $.post($this.attr('action'), $this.serialize(), function (responseData) {
					console.log("got respos").text("Successfully added");
					//}
			    });
			});
	

//freshersearch

	$( "#fSearchBtn" ).bind( "click", function(event, ui) {
  	console.log("inside fresher search");
	var searchVar = $("#searchname").val();
	console.log("searchVar:" + searchVar);
	var  fSearchUrl = "http://toprecur.com/fresher_search.php?search="+ searchVar;
	$.ajax({
	   url: fSearchUrl,
	   dataType: 'json', // N.B! JSONP   It is lower Case OK?
	   success:function(vs){
	     // json (an  Array)
	     console.log("Success;freshers:" + vs);
	     var fTable ="";
	     fTable = "<ul data-role=\"listview\" >";
	     for(fIndex in vs){
	     	f = vs[fIndex];
	     	console.log("fresher:" + f);
	     	
	     	fTable = fTable + "<li>" ;
	     	fTable = fTable + "	<a href=\"#\" fId=\""+ f.id+"\" class=\"fDetails\" > ";
	     	fTable = fTable + "		<div style=\"font-weight:bold\"> "+ f.name + "</div>" ;

	     	fTable = fTable + "	</a>";
	     	fTable = fTable + "		<div>address:" +f.address +"</div><div>email id:" + f.email_id + "</div>";
	     	fTable = fTable + "</li>" ;
	     }
	     fTable = fTable + "</ul>";
	     console.log("fTable:" + fTable);
	     $("#fTable").html(fTable);
	     
	     $(".fDetails").bind( "click", function(event, ui) {
	     			var fId1 = $(this).attr("fId");
			   		console.log("fDetails clicked ;fId:" + fId1);
			   		
			   		loadfresherDetails(fId1);

		  });
	     
	 },
	 error:function(){
	     console.log("Error");
	 },
	});

   });
   	});

   function loadfresherDetails(fId){
	console.log("load fresherDetails fId:" + fId);
	
	var fUrl = "http://toprecur.com/socialimpact/fresher.php?id=" + fId;
	$.ajax({
	   url: fUrl,
	   dataType: 'json', // N.B! JSONP   It is lower Case OK?
	   success:function(f){
	   		console.log("fresher:" + f);
	
			$("#fId").html(f.id);
	   		$("#fName").html(f.name);
	   		$("#fAddress").html(f.address);
	   		$("#fEmailid").html(f.email_id);
	   		$("#fMobileno").html(f.mobile_no);
	   		$("#fPlang").html(f.programming_lang);
	   		$("#fPdet").html(f.project_details);
	   		$("#fDesc").html(f.description);
	   		if(f.email != ""){
	   			$("#fEmail").attr("href","mailto:" + f.email);
	   			$("#fEmail").text(v.email);
	   		}
	   		if(f.phone != ""){
	   			$("#fMobileno").attr("href", "tel:" + f.mobileNo);
	   			$("#fMobileno").text(f.mobileNo);
	   		}
	   		$("#fAddress").html(f.address);
	   		
	   		
	   },
	   error:function(){
     	console.log("Error");
 	  }
 	 });
	
}


	</script>
	</head>
	<body>
		<div data-role="page" id="main">
	  		<div data-role="header">
	  			<h1>Freshers Databaes</h1>
	 		</div>
	  
	  		<div data-role="content">
	  			<a  href = "#addFresherFormPage" name="addBtn" id="addBtn" data-role="button" >Add yourself to Freshers Database</a>
	  			
	  			<a href="#searchfresher" data-role="button" name="fresherSearchBtn" id="fresherSearchBtn">search fresher</a>
			   
	  		</div>
	  	</div>

			<div data-role="page" id="addFresherFormPage">
			    <div data-role="header">
			   	  <a href="#main" class="bbtnb" data-role="button" ><img src="images/leftarrow.png"/></a>
			      <h1>Add Fresher</h1>
			    </div>
			    <div data-role="content">
			  	    <div id="fresherFormStatus">
			  		 Please fill the form and hit submit.
			  	    </div>
			  	<div id="fresherFormWrapper">
				    <form id ="addFresherForm"data-ajax="false" method="post" 
				      action="http://toprecur.com/freshersdb/fresher_add.php">
				 
				      <div data-role="fieldcontain">
				      <table >
				           <tr>
				              <td><label for="name">Name:</label></td>
				              <td><input type="text" name="name" id="name"> </td>
				            </tr>
				            <tr>
				              <td ><label for="address">Address:</label></td>
				              <td  ><input type="text" name="address" id="address"> </td>
				            </tr>
				            <tr>
				              <td  ><label for="mobileNo">Mobile No:</label></td>
				              <td ><input type="text" name="mobileNo" id="mobileNo"> </td>
				            </tr>
				            <tr>
				              <td  ><label for="email">Email Id:</label></td>
				              <td  ><input type="text" name="email" id="email"> </td>
				            </tr>
				            <tr>
				              <td  ><label for="ProgrammingLang">Programming Language:</label></td>
				              <td ><input type="text" name="ProgrammingLang" id="ProgrammingLang"> </td>
				            </tr>
				            <tr width ="100%">
				              <td  width="20%"><label for="projectDetails">Project Details:</label></td>
				              <td width="70%"><textarea name="projectDetails" id="projectDetails"></textarea> </td>
				              <td width="10%"></td>
				            </tr>
				            <tr>
				              <td><label for="description">Description:</label></td>
				              <td><textarea name="description" id="description"></textarea> </td>
				            </tr>

				          </table>
				        </div>
				         <button name="addFresherBtn" id="addFresherBtn" data-line="true" >Submit</button>
				    </form>
				</div>
			  </div>
			 </div>
		


	     <div  data-role ="page" id="searchfresher">
			  <div data-role="header">
		  		<a href="#main" class="bbtnb" data-role="button" ><img src="images/leftarrow.png"/></a>
			    <h1>search Fresher</h1>
			  </div>
		       <div data-role="content">
		       <table>
		       <tr style="font-color:blue">
		         <td><label for="name">Fresher Name:</label></td>
		          <td><input type="text" name="searchname" id="searchname"/></td>
		          </tr>
		          <tr><td></td>
		           <td>
		           <a id="fSearchBtn" href="#fresherinfo" class="bbtn" data-role="button" >
				     <font color="blue" style="font-weight:none;">GO</font>
			       </a>
		          <div data-role="collapsible">
		          <h1>search</h1>  
		          <form id ="searchfresherform" data-ajax="false" method="post" 
					    action="">
					
					 <table border="1" cellspacing ="0" style="border-color:red" >
					  <tr > fresher datails</tr>
					 <tr width="100%"> <td width="20%">id</td>
	                      <td width="30%"> name</td>
	                      <td width="30%"> programming languages</td>
	                      <td width="20%"> <a href="#fresherdeatils" class="fbtnd" data-role="button" id="fdetails" >details</a></td>
	                  </tr>
					 </table>
					 
				   </form>
		          </div>
		            <div id="fTable">
		            </div>
		           		          </tr>
		          </table>
		          </div>
		          </div>

		          <div data-role="page"  id="fresherinfo">
                    <div data-role="header">
                     <h1>Fresher details</h1>
                     </div>
                     <div data-role="content">

		           <form id ="searchfresherform" data-ajax="false" method="post" 
					    action="">
					
					 <table border="1" cellspacing ="0" style="border-color:red" >
					  <tr > fresher datails</tr>
					 <tr width="100%"> <td width="20%">id</td>
	                      <td width="30%"> name</td>
	                      <td width="30%"> programming languages</td>
	                      <td width="20%"> <a href="#fresherdeatils" class="fbtnd" data-role="button" id="fdetails" >details</a></td>
	                  </tr>
					 </table>
					 
				   </form>

				   </div>
				   </div>
				   

         <div id="fresherdeatils" data-role="page">
            <div data-role="header">
              <h1>Fresher information</h1>
              <a href="#main" class="bbtnb" data-role="button" ><img src="images/leftarrow.png"/></a>
             </div>
                   <div data-role="content">
				<form id="fresherinfor" data-ajax="false" method="post"  action="" >
				      <table border="1" cellspacing ="0" style="border-color:blue" >
					     <tr > fresher details</tr>
					     <tr width="100%"> 
	                            <td>Name:</td>
     		                    <td><div id="vName"></div></td></tr>
	                     <tr>
	                     <tr width="100%"> 
	                            <td>Address:</td>
     		                    <td><div id="fAddress"></div></td></tr>
	                     <tr>
	                     <tr width="100%"> 
	                            <td>Email Id:</td>
     		                    <td><a href="" id="fEmailid"></a></td></tr>
	                     <tr>
	                     <tr width="100%"> 
	                            <td>Mobile No:</td>
     		                    <td><a href="tel:2125551212" id="fMobileno"></td></tr>
	                     <tr>
	                     <tr width="100%"> 
	                            <td>programming Languages:</td>
     		                    <td><div id="fPlang"></div></td></tr>
	                     <tr>
	                      <tr width="100%"> 
	                            <td>project Details:</td>
     		                    <td><div id="fPdet"></div></td></tr>
	                     <tr>
	                     <tr width="100%"> 
	                            <td>Description:</td>
     		                    <td><div id="fDesc"></div></td></tr>
	               </table>

				</form>
			 </div>
		</div>


	
                

	</body>
</html>